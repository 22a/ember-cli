parameters:
  nodeVersion: '8'
  enableLinting: false
  testCommand: 'yarn test:all'
  testCommandPrefix: ''

steps:
  - template: setup-node.yml
    parameters:
      nodeVersion: ${{ parameters.nodeVersion }}
  - template: install-dependencies.yml

  - ${{ if not(eq(parameters.enableLinting, 'false')) }}:
      - script: yarn lint
        displayName: 'Lint'

  - script: |
      ${{ parameters.testCommandPrefix }} ${{ parameters.testCommand }}
    displayName: 'Run Tests'
